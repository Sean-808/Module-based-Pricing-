<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bayzat – Attendance Bundle</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Minor brand tweaks -->
  <style>
    body{font-family:Inter,system-ui,sans-serif}
    body{background:linear-gradient(to bottom,#E8E6FF 0%,#ffffff 60%)}
    .glass{background:rgba(255,255,255,.72);backdrop-filter:blur(6px)}
  </style>
</head>
<body class="text-slate-800 min-h-screen">

  <!-- ╭─────────────────  HERO & GLOBAL CONTROLS  ─────────────────╮ -->
  <header class="max-w-6xl mx-auto px-4 py-10 text-center space-y-6">
    <h1 class="text-4xl md:text-5xl font-semibold">Configure Attendance</h1>

    <div class="flex flex-col md:flex-row items-center justify-center gap-4">
      <!-- Billing cycle -->
      <div class="inline-flex bg-slate-100 rounded-full p-1">
        <button id="monthlyBtn" class="cycle-btn px-4 py-1 rounded-full text-sm">Monthly</button>
        <button id="annualBtn"  class="cycle-btn px-4 py-1 rounded-full text-sm">Annual</button>
      </div>

      <!-- (Employee controls left in for future use) -->
      <div class="flex items-center gap-2 w-full md:w-[300px]">
        <label class="text-sm font-medium shrink-0">Employees</label>
        <input id="empRange" type="range" min="1" max="500" value="50"
               class="w-full accent-indigo-600">
        <input id="empInput" type="number" value="50"
               class="w-20 border rounded px-2 py-1 text-sm text-center">
      </div>
    </div>
  </header>

  <!-- ╭─────────────────  MAIN GRID  ─────────────────╮ -->
  <main class="max-w-6xl mx-auto px-4 grid grid-cols-1 lg:grid-cols-3 gap-8 pb-24">

    <!-- LEFT ▸ Attendance tiers -->
    <section id="modules" class="space-y-10 lg:col-span-2"></section>

    <!-- RIGHT ▸ Sticky invoice -->
    <aside id="invoice"
           class="glass lg:col-span-1 sticky top-6 self-start rounded-xl shadow-md p-6 space-y-4">
      <h3 class="text-xl font-semibold">Your products</h3>
      <ul id="lineItems" class="divide-y text-sm"></ul>
      <hr>
      <div id="subtotalRow" class="flex justify-between text-sm"></div>
      <div id="vatRow"      class="flex justify-between text-sm"></div>
      <div id="totalRow"    class="flex justify-between text-lg font-semibold pt-2"></div>
      <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium">
        Buy now
      </button>
    </aside>
  </main>

  <!-- ╭─────────────────  LOGIC  ─────────────────╮ -->
  <script>
/* ── 1. CONFIG (Attendance only) ────────────────────────────────────────── */
const modules = [{
  key: "attendance",
  title: "Attendance",
  tiers: [
    {
      key: "site",
      label: "Site / Outlet Offices",
      priceMonthly: 83.33,
      priceAnnual: 83.33 * 12,
      blurb: "Ideal for outlet offices / client-site projects",
      qtyLabel: "No. of Site / Outlet offices"
    },
    {
      key: "flexi",
      label: "FlexiPlus",
      priceMonthly: 166.67,
      priceAnnual: 166.67 * 12,
      blurb: "For mid-sized teams with multiple office locations",
      qtyLabel: "No. of FlexiPlus offices"
    },
    {
      key: "multisite",
      label: "MultiSite",
      priceMonthly: 566.67,
      priceAnnual: 566.67 * 12,
      blurb: "For companies with many offices and employees",
      qtyLabel: "No. of MultiSite offices"
    },
    {
      key: "enterprise",
      label: "Enterprise",
      priceMonthly: 0,
      priceAnnual: 0,
      blurb: "Custom pricing",
      qtyLabel: null         // no input for custom pricing
    }
  ]
}];

/* ── 2. DOM refs ────────────────────────────────────────────────────────── */
const $          = sel => document.querySelector(sel);
const modulesEl  = $("#modules");
const lineItems  = $("#lineItems");
const subtotalEl = $("#subtotalRow");
const vatEl      = $("#vatRow");
const totalEl    = $("#totalRow");

/* ── 3. STATE ───────────────────────────────────────────────────────────── */
let cycle      = "annual";   // "monthly" | "annual"
let selections = {};         // { attendance: "multisite" }
let quantities = {};         // { attendance_multisite_qty: 1 }

/* ── 4. RENDER MODULES ──────────────────────────────────────────────────── */
function renderModules () {
  modulesEl.innerHTML = "";
  modules.forEach(mod => {
    const selTier = selections[mod.key];

    // tier buttons
    const tierGrid = `
      <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4">
        ${mod.tiers.map(tier => `
          <button
            class="tier-btn border rounded-lg p-4 text-left transition shadow-sm hover:shadow-md
                   ${selTier === tier.key ? "border-indigo-600 ring-2 ring-indigo-300" : "border-slate-200"}"
            data-module="${mod.key}" data-tier="${tier.key}">
            <div class="flex items-center justify-between mb-2">
              <span class="font-medium">${tier.label}</span>
              <span class="w-4 h-4 rounded-full border
                        ${selTier === tier.key ? "bg-indigo-600 border-indigo-600" : "border-slate-400"}"></span>
            </div>
            <p class="text-indigo-600 font-semibold">
              AED ${format(cycle === "annual" ? tier.priceAnnual : tier.priceMonthly)}
            </p>
            <p class="text-xs mt-1 text-slate-600 leading-snug">${tier.blurb}</p>
          </button>
        `).join("")}
      </div>`;

    // qty input (only for selected tier and when qtyLabel exists)
    let qtyInput = "";
    if (selTier) {
      const tier = mod.tiers.find(t => t.key === selTier);
      if (tier.qtyLabel) {
        const qtyKey = `${mod.key}_${tier.key}_qty`;
        if (quantities[qtyKey] === undefined) quantities[qtyKey] = 1;
        qtyInput = `
          <div class="mt-4">
            <label class="text-sm font-medium mr-2">${tier.qtyLabel}</label>
            <input type="number" min="1" step="1" value="${quantities[qtyKey]}"
                   data-qty="${qtyKey}"
                   class="qty-input w-24 border rounded px-2 py-1 text-sm text-center">
          </div>`;
      }
    }

    const sec = document.createElement("section");
    sec.innerHTML = `<h2 class="text-lg font-semibold mb-3">${mod.title}</h2>${tierGrid}${qtyInput}`;
    modulesEl.appendChild(sec);
  });
}

/* ── 5. INVOICE CALC ────────────────────────────────────────────────────── */
function recalc () {
  lineItems.innerHTML = "";
  let subtotal = 0;

  modules.forEach(mod => {
    const tierKey = selections[mod.key];
    if (!tierKey) return;

    const tier     = mod.tiers.find(t => t.key === tierKey);
    const unit     = cycle === "annual" ? tier.priceAnnual : tier.priceMonthly;
    const qtyKey   = `${mod.key}_${tierKey}_qty`;
    const qty      = tier.qtyLabel ? (quantities[qtyKey] || 1) : 1;
    const lineTotal = unit * qty;
    subtotal += lineTotal;

    const li = document.createElement("li");
    li.className = "py-2 flex justify-between";
    li.innerHTML = `<span>${mod.title} — ${tier.label} (x${qty})</span>
                    <span class="font-medium">AED ${format(lineTotal)}</span>`;
    lineItems.appendChild(li);
  });

  const vat   = subtotal * 0.05;
  const total = subtotal + vat;
  subtotalEl.innerHTML = `<span>Subtotal</span><span>AED ${format(subtotal)}</span>`;
  vatEl.innerHTML      = `<span>VAT (5%)</span><span>AED ${format(vat)}</span>`;
  totalEl.innerHTML    = `<span>Total</span><span>AED ${format(total)}</span>`;
}

/* ── 6. HELPERS & HANDLERS ──────────────────────────────────────────────── */
const format = n => Math.round(n).toLocaleString();

document.body.addEventListener("click", e => {
  // choose a tier
  const btn = e.target.closest(".tier-btn");
  if (btn) {
    selections[btn.dataset.module] = btn.dataset.tier;
    renderModules(); recalc(); return;
  }
  // billing cycle toggle
  if (e.target.id === "monthlyBtn") { cycle = "monthly"; setCycleUI(); }
  if (e.target.id === "annualBtn")  { cycle = "annual";  setCycleUI(); }
});

// qty edits
document.body.addEventListener("input", e => {
  if (e.target.matches(".qty-input")) {
    quantities[e.target.dataset.qty] = Number(e.target.value) || 1;
    recalc();
  }
});

function setCycleUI () {
  document.querySelectorAll(".cycle-btn").forEach(b => {
    const on = b.id.startsWith(cycle);
    b.classList.toggle("bg-indigo-600", on);
    b.classList.toggle("text-white", on);
    b.classList.toggle("text-slate-600", !on);
  });
  recalc();
}

/* ── 7. BOOTSTRAP ───────────────────────────────────────────────────────── */
setCycleUI();
renderModules();
recalc();
  </script>
</body>
</html>
  
